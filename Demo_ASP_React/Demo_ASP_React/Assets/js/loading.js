!function(n,t){"object"==typeof exports?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n)}(this,function(n){var y,i,t,r,h,o,c,l,a,f,v,u,e,p,s,w;o=document.createElement("fakeelement");r=!1;e=!1;t="animationend";u=null;h="Webkit Moz O ms".split(" ");v={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};for(c in v)if(p=v[c],null!=o.style[c]){u=p;e=!0;break}if(null!=o.style.animationName&&(r=!0),!r)for(s=0,w=h.length;w>s;s++)if(l=h[s],null!=o.style[""+l+"AnimationName"]){switch(l){case"Webkit":t="webkitAnimationEnd";break;case"Moz":t="animationend";break;case"O":t="oanimationend";break;case"ms":t="MSAnimationEnd"}r=!0;break}return i=function(n,t){return t.classList?t.classList.add(n):t.className+=" "+n},f=function(n,t){return t.classList?t.classList.remove(n):t.className=t.className.replace(n,"").trim()},y=function(){function n(n){var h,o,s,c;h=this.constructor._defaultOptions;this.options={};this.loaded=!1;this.finishing=!1;for(o in h)c=h[o],this.options[o]=null!=n[o]?n[o]:c;this._loadingElem=document.createElement("div");this._loadingHtmlToDisplay=[];this._loadingElem.className="pg-loading-screen";null!=this.options.backgroundColor&&(this._loadingElem.style.backgroundColor=this.options.backgroundColor);this._loadingElem.innerHTML=this.options.template;this._loadingHtmlElem=this._loadingElem.getElementsByClassName("pg-loading-html")[0];null!=this._loadingHtmlElem&&(this._loadingHtmlElem.innerHTML=this.options.loadingHtml);this._readyToShowLoadingHtml=!1;this._logoElem=this._loadingElem.getElementsByClassName("pg-loading-logo")[0];null!=this._logoElem&&(this._logoElem.src=this.options.logo);f("pg-loaded",document.body);i("pg-loading",document.body);document.body.appendChild(this._loadingElem);i("pg-loading",this._loadingElem);this._onLoadedCallback=this.options.onLoadedCallback;s=function(n){return function(u){return n.loaded=!0,n._readyToShowLoadingHtml=!0,i("pg-loaded",n._loadingHtmlElem),r&&n._loadingHtmlElem.removeEventListener(t,s),n._loadingHtmlToDisplay.length>0&&n._changeLoadingHtml(),n.finishing?(null!=u&&u.stopPropagation(),n._finish()):void 0}}(this);null!=this._loadingHtmlElem&&(r?this._loadingHtmlElem.addEventListener(t,s):s(),this._loadingHtmlListener=function(n){return function(){return n._readyToShowLoadingHtml=!0,f("pg-loading",n._loadingHtmlElem),e&&n._loadingHtmlElem.removeEventListener(u,n._loadingHtmlListener),n._loadingHtmlToDisplay.length>0?n._changeLoadingHtml():void 0}}(this),this._removingHtmlListener=function(n){return function(){return n._loadingHtmlElem.innerHTML=n._loadingHtmlToDisplay.shift(),f("pg-removing",n._loadingHtmlElem),i("pg-loading",n._loadingHtmlElem),e?(n._loadingHtmlElem.removeEventListener(u,n._removingHtmlListener),n._loadingHtmlElem.addEventListener(u,n._loadingHtmlListener)):n._loadingHtmlListener()}}(this))}return n._defaultOptions={backgroundColor:null,logo:null,loadingHtml:null,template:"<div class='pg-loading-inner'>\n  <div class='pg-loading-center-outer'>\n    <div class='pg-loading-center-middle'>\n      <h1 class='pg-loading-logo-header'>\n        <img class='pg-loading-logo'><\/img>\n      <\/h1>\n      <div class='pg-loading-html'>\n      <\/div>\n    <\/div>\n  <\/div>\n<\/div>",onLoadedCallback:null},n.prototype.finish=function(n,t){return null==n&&(n=!1),window.document.hidden&&(n=!0),this.finishing=!0,null!=t&&this.updateOption("onLoadedCallback",t),this.loaded||n?this._finish(n):void 0},n.prototype.updateOption=function(n,t){switch(n){case"backgroundColor":return this._loadingElem.style.backgroundColor=t;case"logo":return this._logoElem.src=t;case"loadingHtml":return this.updateLoadingHtml(t);case"onLoadedCallback":return this._onLoadedCallback=t;default:throw new Error("Unknown option '"+n+"'");}},n.prototype.updateOptions=function(n){var t,r,i;null==n&&(n={});i=[];for(t in n)r=n[t],i.push(this.updateOption(t,r));return i},n.prototype.updateLoadingHtml=function(n,t){if(null==t&&(t=!1),null==this._loadingHtmlElem)throw new Error("The loading template does not have an element of class 'pg-loading-html'");return t?(this._loadingHtmlToDisplay=[n],this._readyToShowLoadingHtml=!0):this._loadingHtmlToDisplay.push(n),this._readyToShowLoadingHtml?this._changeLoadingHtml():void 0},n.prototype._changeLoadingHtml=function(){return this._readyToShowLoadingHtml=!1,this._loadingHtmlElem.removeEventListener(u,this._loadingHtmlListener),this._loadingHtmlElem.removeEventListener(u,this._removingHtmlListener),f("pg-loading",this._loadingHtmlElem),f("pg-removing",this._loadingHtmlElem),e?(i("pg-removing",this._loadingHtmlElem),this._loadingHtmlElem.addEventListener(u,this._removingHtmlListener)):this._removingHtmlListener()},n.prototype._finish=function(n){var u;return null==n&&(n=!1),null!=this._loadingElem?(i("pg-loaded",document.body),"function"==typeof this._onLoadedCallback&&this._onLoadedCallback.apply(this),u=function(n){return function(){return document.body.removeChild(n._loadingElem),f("pg-loading",document.body),r&&n._loadingElem.removeEventListener(t,u),n._loadingElem=null}}(this),!n&&r?(i("pg-loaded",this._loadingElem),this._loadingElem.addEventListener(t,u)):u()):void 0},n}(),a=function(n){return null==n&&(n={}),new y(n)},n.pleaseWait=a,a})